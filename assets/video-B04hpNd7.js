import{i as B,g as S,s as u,r as s,c as y,a as v}from"./index.esm2017-CJ5YLr7D.js";const w={apiKey:"AIzaSyAz8yYM7fno_lWOgJvrQ09ElrgS2MsbxoY",authDomain:"odetojoy-3044e.firebaseapp.com",databaseURL:"https://odetojoy-3044e-default-rtdb.firebaseio.com",projectId:"odetojoy-3044e",storageBucket:"odetojoy-3044e.firebasestorage.app",messagingSenderId:"745234947202",appId:"1:745234947202:web:7a13bb889fc1ea3abd689b"},D=B(w),c=S(D),O=document.getElementById("playBtn"),f=document.getElementById("loopBtn"),h=document.getElementById("loopState");document.getElementById("timestampDisplay");const p=document.getElementById("alert");document.getElementById("dashboard");const d=document.getElementById("syncedVideo"),m=document.getElementById("bottomStats"),j=60;let o=!0;f.onclick=()=>{o=!o,u(s(c,"loopEnabled"),o),g()};function g(){h.textContent=o?"Looping ON":"Looping OFF",f.textContent=o?"ðŸ” Turn Loop OFF":"ðŸ” Turn Loop ON"}O.onclick=()=>{const e=Date.now();u(s(c,"globalTimestamp"),e),d.currentTime=0,d.muted=!0,d.play()};y(s(c,"loopEnabled"),e=>{o=!!e.val(),g()});y(s(c,"globalTimestamp"),e=>{const t=e.val();if(!t)return;(Date.now()-t)/1e3>j&&!o?p.textContent="âš ï¸ Music clip has ended â€” Press â–¶ï¸ to restart":p.textContent=""});const b={dnb:"ðŸ¥",bells:"ðŸ””",brass:"ðŸŽº",piano:"ðŸŽ¹"};function L(e){const t={},l=Date.now();Object.keys(b).forEach(n=>{t[n]={count:0,totalSeconds:0,activeNow:0}}),Object.entries(e).forEach(([n,a])=>{const i=a.instrument;i&&(t[i].count++,(a.activationRecords||[]).forEach(r=>{const E=r.start||0,I=r.end||l;t[i].totalSeconds+=(I-E)/1e3}),a.playing&&t[i].activeNow++)}),m.innerHTML="",Object.entries(t).forEach(([n,a])=>{m.innerHTML+=`
      <div class="count-box">
        ${b[n]}<br/>
        ${a.activeNow} playing
      </div>
    `})}setInterval(()=>{v(s(c,"users")).then(e=>{const t=e.val()||{};L(t)})},2e3);
