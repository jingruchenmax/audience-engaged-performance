import{i as I,g as S,s as g,r as c,c as u,a as h}from"./index.esm2017-CJ5YLr7D.js";const D={apiKey:"AIzaSyAz8yYM7fno_lWOgJvrQ09ElrgS2MsbxoY",authDomain:"odetojoy-3044e.firebaseapp.com",databaseURL:"https://odetojoy-3044e-default-rtdb.firebaseio.com",projectId:"odetojoy-3044e",storageBucket:"odetojoy-3044e.firebasestorage.app",messagingSenderId:"745234947202",appId:"1:745234947202:web:7a13bb889fc1ea3abd689b"},O=I(D),i=S(O),p=document.getElementById("dashboard"),v=document.getElementById("playBtn"),f=document.getElementById("loopBtn"),j=document.getElementById("timestampDisplay"),m=document.getElementById("alert"),w=document.getElementById("loopState"),x=60;let n=!0;f.onclick=()=>{n=!n,g(c(i,"loopEnabled"),n),y()};v.onclick=()=>{const e=Date.now();g(c(i,"globalTimestamp"),e)};function y(){w.textContent=n?"Looping ON":"Looping OFF",f.textContent=n?"ðŸ” Turn Loop OFF":"ðŸ” Turn Loop ON"}u(c(i,"loopEnabled"),e=>{n=!!e.val(),y()});u(c(i,"globalTimestamp"),e=>{const t=e.val();if(!t)return;const a=(Date.now()-t)/1e3;j.textContent=`${t} (${new Date(t).toLocaleTimeString()})`,a>x&&!n?m.textContent="âš ï¸ Music clip has ended â€” Press â–¶ï¸ to restart":m.textContent=""});const b={dnb:"ðŸ¥ Drum & Bass",bells:"ðŸ”” Bells & Guitars",brass:"ðŸŽº Brass & Winds",piano:"ðŸŽ¹ Piano & Strings"};function L(e){const t={},l=Date.now();Object.keys(b).forEach(a=>{t[a]={count:0,totalSeconds:0}}),Object.entries(e).forEach(([a,o])=>{const r=o.instrument;if(!r)return;t[r].count++;const d=o.activationRecords?Object.values(o.activationRecords):[];if(d.forEach(s=>{const B=s.start||0,E=s.end||l;t[r].totalSeconds+=(E-B)/1e3}),o.playing&&d.length>0){const s=d[d.length-1];!s.end&&s.start&&(t[r].totalSeconds+=(l-s.start)/1e3)}}),p.innerHTML="",Object.entries(t).forEach(([a,o])=>{p.innerHTML+=`
      <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #555; border-radius: 8px;">
        <strong>${b[a]}</strong> â€” 
        <span>${o.count} active</span> â€” 
        <span>${Math.floor(o.totalSeconds)}s triggered</span>
      </div>
    `})}setInterval(()=>{h(c(i,"users")).then(e=>{const t=e.val()||{};L(t)})},2e3);
